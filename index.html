<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>KUIS & ABSENSI PAI SD</title>
<style>
body{margin:0;font-family:Segoe UI, sans-serif;background:#eef;display:flex;justify-content:center;align-items:center;min-height:100vh;}
.app{background:white;width:100%;max-width:700px;border-radius:10px;box-shadow:0 3px 15px rgba(0,0,0,.2);padding:10px;overflow:hidden;}
header{background:#2E8B57;color:white;text-align:center;padding:15px;font-size:1.2rem;font-weight:bold;}
.screen{display:none;padding:20px;}
.screen.active{display:block;}
button,input,select{width:100%;padding:10px;margin:6px 0;border-radius:6px;border:1px solid #bbb;font-size:1rem;}
button{background:#2E8B57;color:white;font-weight:bold;cursor:pointer;}
table{width:100%;border-collapse:collapse;margin-top:10px;font-size:.9rem;}
th,td{border:1px solid #ccc;padding:6px;text-align:center;}
th{background:#2E8B57;color:white;}
.del{background:#e74c3c;color:white;border:none;border-radius:4px;cursor:pointer;font-size:.8rem;}
.h{background:#90ee90;} .i{background:#ffb347;} .s{background:#add8e6;} .a{background:#ff6961;}
</style>
</head>

<body>
<div class="app">
<header>KUIS & ABSENSI PAI SD</header>

<!-- LOGIN -->
<div id="login" class="screen active">

<!-- FOTO YANG DITAMBAHKAN -->
<img src="aku.jpg" style="width:120px;height:120px;border-radius:50%;object-fit:cover;display:block;margin:10px auto;border:3px solid #2E8B57;">

<h3 style="text-align:center;">LOGIN</h3>
<label>Nama</label>
<input id="studentName">
<label style="margin-top:8px;">Kelas</label>
<select id="studentClass">
<option disabled selected>Pilih kelas</option>
<option>3A</option>
<option>3B</option>
<option>4A</option>
<option>4B</option>
</select>
<button onclick="startQuiz()">Mulai</button>
<button onclick="openAdmin()">Admin</button>
</div>

<!-- QUIZ -->
<div id="quiz" class="screen">
<h3 id="qtext"></h3>
<div id="opts"></div>
<button onclick="nextQ()">Selanjutnya</button>
</div>

<!-- RESULT -->
<div id="result" class="screen">
<h3>Hasil</h3>
<p id="rmsg" style="text-align:center;"></p>
<button onclick="show('login')">Kembali</button>
</div>

<!-- ADMIN -->
<div id="admin" class="screen">
<h3>Admin Panel</h3>
<button onclick="show('addSiswa')">Tambah Siswa</button>
<button onclick="show('nilai')">Rekap Nilai</button>
<button onclick="show('absen')">Rekap Absensi</button>
<button onclick="nextDay()">Hari Berikutnya</button>
<button onclick="resetAll()">Reset Semua</button>
<button onclick="show('login')">Kembali</button>
</div>

<!-- TAMBAH SISWA -->
<div id="addSiswa" class="screen">
<h3>Tambah / Hapus Siswa</h3>
<input id="newName" placeholder="Nama siswa">
<select id="newCls">
<option>3A</option><option>3B</option><option>4A</option><option>4B</option>
</select>
<button onclick="addS()">Tambah</button>
<table id="tblStudent"><thead><tr><th>Nama</th><th>Kelas</th><th>Aksi</th></tr></thead><tbody></tbody></table>
<button onclick="show('admin')">Kembali</button>
</div>

<!-- NILAI -->
<div id="nilai" class="screen">
<h3>Rekap Nilai</h3>
<table id="tNilai"><thead><tr><th>Nama</th><th>Kelas</th><th>Nilai</th><th>Waktu</th></tr></thead><tbody></tbody></table>
<button onclick="show('admin')">Kembali</button>
</div>

<!-- ABSENSI -->
<div id="absen" class="screen">
<h3>Rekap Absensi Hari <span id="hnum"></span></h3>
<select id="clsAbs" onchange="loadAbsen()"><option>3A</option><option>3B</option><option>4A</option><option>4B</option></select>
<table id="tAbsen"><thead><tr><th>Nama</th></tr></thead><tbody></tbody></table>
<button onclick="show('admin')">Kembali</button>
</div>

<script>
/* SCRIPT ASLI KAMU â€” TIDAK DIRUSAK */
let pwd="040698";
let classes=JSON.parse(localStorage.getItem('classes')||'["3A","3B","4A","4B"]');
let students=JSON.parse(localStorage.getItem('students')||'{"3A":[],"3B":[],"4A":[],"4B":[]}');
let scores=JSON.parse(localStorage.getItem('scores')||'[]');
let att=JSON.parse(localStorage.getItem('att')||'{}');
let day=parseInt(localStorage.getItem('day')||'1');

function save(){localStorage.setItem('classes',JSON.stringify(classes));localStorage.setItem('students',JSON.stringify(students));localStorage.setItem('scores',JSON.stringify(scores));localStorage.setItem('att',JSON.stringify(att));localStorage.setItem('day',day);}

function show(id){document.querySelectorAll('.screen').forEach(s=>s.classList.remove('active'));document.getElementById(id).classList.add('active');if(id=='absen')document.getElementById('hnum').innerText=day;}

function startQuiz(){alert('Placeholder kuis, nanti diisi!');}

function nextQ(){}

function openAdmin(){let p=prompt("Sandi admin:");if(p==pwd){show('admin');loadTblStudents();loadNilai();}else alert("Sandi salah!");}

function addS(){let n=document.getElementById('newName').value.trim();let c=document.getElementById('newCls').value;if(!n)return;students[c].push(n);if(!att[c])att[c]={};att[c][n]=Array(30).fill('');save();loadTblStudents();}

function delS(c,n){students[c]=students[c].filter(x=>x!=n);if(att[c])delete att[c][n];save();loadTblStudents();}

function loadTblStudents(){let tb=document.querySelector('#tblStudent tbody');tb.innerHTML="";for(let c in students){students[c].forEach(n=>tb.innerHTML+=`<tr><td>${n}</td><td>${c}</td><td><button class='del' onclick="delS('${c}','${n}')">Hapus</button></td></tr>`);} }

function loadNilai(){let tb=document.querySelector('#tNilai tbody');tb.innerHTML="";scores.forEach(s=>tb.innerHTML+=`<tr><td>${s.name}</td><td>${s.cls}</td><td>${s.score}</td><td>${s.time}</td></tr>`);}

function loadAbsen(){alert("Placeholder absensi!");}

function nextDay(){if(day<30)day++;save();}

function resetAll(){if(confirm("Reset semua data?")){localStorage.clear();day=1;alert("Sudah direset!");}}
</script>
</body>
</html>